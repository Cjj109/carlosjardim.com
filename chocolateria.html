<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="La Chocolater√≠a - Selecciona tu chocolate favorito">
  <meta name="author" content="Carlos Jardim">
  <meta name="theme-color" content="#1a0a0a">
  <meta name="robots" content="noindex, nofollow">

  <title>La Chocolater√≠a</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap">

  <!-- Same CSS as main page -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/pong.css">
  <link rel="stylesheet" href="css/chocolate-shop.css">
  <link rel="stylesheet" href="css/age-gate.css">

  <style>
    /* Minimal reset + dark background (no base.css to avoid flex centering) */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: #0a0a0a;
      color: #fff;
      font-family: var(--font-sans, 'Inter', sans-serif);
    }

    /* Missing keyframes that live in other CSS files on main page */
    @keyframes fadeIn {
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Landing page shown when chocolate shop is closed */
    .choco-landing {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, #1a0a0a 0%, #2d1810 50%, #1a0a0a 100%);
    }

    .choco-landing-title {
      font-size: clamp(28px, 6vw, 48px);
      font-weight: 900;
      color: #ffd700;
      font-family: var(--mono, 'JetBrains Mono', monospace);
      text-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
      margin-bottom: 20px;
    }

    .choco-landing-btn {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
      border: 2px solid #b8860b;
      border-radius: 12px;
      padding: 16px 40px;
      font-size: 18px;
      font-weight: 700;
      color: #8b4513;
      cursor: pointer;
      font-family: var(--mono, 'JetBrains Mono', monospace);
      letter-spacing: 1px;
      transition: all 0.2s;
      box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
      margin-bottom: 16px;
    }

    .choco-landing-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(255, 215, 0, 0.5);
    }

    .choco-landing-link {
      color: rgba(255, 255, 255, 0.4);
      text-decoration: none;
      font-size: 13px;
      font-family: var(--mono, 'JetBrains Mono', monospace);
      transition: color 0.2s;
    }

    .choco-landing-link:hover {
      color: #ffd700;
    }
  </style>
</head>

<body>
  <!-- Landing (visible when shop is closed) -->
  <div class="choco-landing" id="chocoLanding">
    <div class="choco-landing-title">üç´ La Chocolater√≠a</div>
    <button class="choco-landing-btn" onclick="openChocolateShop()">Entrar</button>
    <a href="/" class="choco-landing-link">‚Üê carlosjardim.com</a>
  </div>

  <!-- ====== EXACT SAME HTML AS INDEX.HTML ====== -->

  <!-- Chocolate Shop Modal -->
  <div class="chocolate-shop-overlay" id="chocolateShopModal" role="dialog" aria-modal="true" aria-label="Chocolater√≠a">
    <div class="chocolate-shop-container">
      <button class="chocolate-shop-close" onclick="closeChocolateShop()" aria-label="Cerrar chocolater√≠a">‚úï</button>

      <div class="shop-header">
        <div class="shop-title">üç´ La Chocolater√≠a</div>
        <div class="shop-subtitle">Selecciona tu dulce favorito</div>
        <button class="random-chocolate-btn" onclick="startSlotMachine()">
          üé∞ Al Azar
        </button>
      </div>

      <!-- Slot Machine -->
      <div id="slotMachineContainer" class="slot-machine-container" style="display: none;">
        <div class="slot-machine">
          <div class="slot-reel" id="slotReel">
            <!-- Chocolate images will be duplicated here for animation -->
          </div>
        </div>
        <div class="slot-machine-overlay"></div>
      </div>

      <!-- Grid View -->
      <div id="chocolatesGridView">
        <div class="chocolates-grid" id="chocolatesGrid">
          <!-- Chocolates will be rendered here by JS -->
        </div>

        <!-- Compatibility Test Button (links to main page) -->
        <div style="text-align: center; margin-top: 30px;">
          <button class="compat-test-btn" onclick="openCompatibilityTestFromShop()">
            ¬øNinguno te convence? üíò Haz el test
          </button>
        </div>
      </div>

      <!-- Detail View -->
      <div id="chocolateDetailView" style="display: none;">
        <!-- Chocolate detail will be rendered here by JS -->
      </div>
    </div>
  </div>

  <!-- Age Gate Modal -->
  <div class="age-gate-overlay gate-style" id="ageGateModal" role="dialog" aria-modal="true" aria-label="Verificaci√≥n de edad">
    <div class="gate-card">
      <div class="close-gate" onclick="closeAgeGateModal()" role="button" tabindex="0" aria-label="Cerrar">‚úï</div>
      <p class="gate-step-text">
        ¬øEres mayor de 18?
      </p>
      <button onclick="handleAgeGateResponse(true)">S√≠</button>
      <button onclick="handleAgeGateResponse(false)">No</button>
    </div>
  </div>

  <!-- Police Arrest Overlay -->
  <div class="police-arrest-overlay" id="policeArrestOverlay" onclick="closePoliceArrest()">
    <div class="police-arrest-content">
      <div class="police-lights">
        <div class="police-light red"></div>
        <div class="police-light blue"></div>
      </div>
      <div class="arrest-text">¬°Chocolate detenido! üöî</div>
      <div class="arrest-subtext">Este bomb√≥n es para mayores de 18</div>
      <div class="arrest-dismiss">Toca para cerrar</div>
    </div>
  </div>

  <!-- Closet Overlay (para Anthonny) -->
  <div class="closet-overlay" id="closetOverlay" onclick="closeCloset()">
    <div class="closet-content">
      <div class="closet-wardrobe">
        <div class="closet-top"></div>
        <div class="closet-body">
          <div class="closet-inside">
            <div class="closet-peek">üëÄ</div>
            <div class="closet-hanger">üß•</div>
          </div>
          <div class="closet-door-left">
            <div class="closet-slat"></div>
            <div class="closet-slat"></div>
            <div class="closet-slat"></div>
            <div class="closet-knob"></div>
          </div>
          <div class="closet-door-right">
            <div class="closet-slat"></div>
            <div class="closet-slat"></div>
            <div class="closet-slat"></div>
            <div class="closet-knob"></div>
          </div>
        </div>
        <div class="closet-base"></div>
      </div>
      <div class="closet-text">Se escondi√≥ en el closet</div>
      <div class="closet-subtext">Este bomb√≥n no quiere salir</div>
      <div class="closet-dismiss">Toca para cerrar</div>
    </div>
  </div>

  <!-- ====== SCRIPTS ====== -->

  <!-- Stubs for functions that live in other JS files on main page -->
  <script>
    // Stub: openCompatibilityTest is in compatibility-test.js (not loaded here)
    // Redirect to main page with the test
    function openCompatibilityTest() {
      window.location.href = '/';
    }

    // Stub: toggleMode is in main.js (not needed here, but chocolate-shop.js wraps it)
    // chocolate-shop.js handles undefined toggleMode gracefully
  </script>

  <!-- Same JS as main page -->
  <script src="js/age-gate.js"></script>
  <script src="js/chocolate-shop.js"></script>

  <!-- Auto-open chocolate shop + override close behavior -->
  <script>
    // Override closeChocolateShop to show landing page instead of restoring scroll
    const _originalCloseShop = closeChocolateShop;
    closeChocolateShop = function() {
      const modal = document.getElementById('chocolateShopModal');
      if (!modal) return;

      modal.classList.remove('active');
      document.body.classList.remove('chocolate-shop-open');

      // Reset to grid view for next open
      setTimeout(() => {
        const gridView = document.getElementById('chocolatesGridView');
        const detailView = document.getElementById('chocolateDetailView');
        if (gridView) gridView.style.display = 'block';
        if (detailView) {
          detailView.classList.remove('active');
          detailView.style.display = 'none';
        }
      }, 300);
    };

    // Auto-open the chocolate shop when page loads
    document.addEventListener('DOMContentLoaded', () => {
      openChocolateShop();
    });
  </script>
</body>
</html>
